<html>
<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
<script src="/js/leaflet-hash.js"></script>
<style>
body{margin:0px;}
#map { height:100%; }

</style>
<script type="text/javascript">

var map;

function initmap() {
	// set up the map
	map = new L.Map('map');

	var hash = new L.Hash(map);
	// create the tile layer with correct attribution
	var osmUrl='http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
	var osmAttrib='Map data Â© <a href="http://openstreetmap.org">OpenStreetMap</a> contributors';
	var osm = new L.TileLayer(osmUrl, {minZoom: 3, maxZoom: 19, attribution: osmAttrib, opacity:0.5});		

	var cloudUrl = '/tiles/tiles.py/cloud/{z}/{x}/{y}.png';
	var cloud = new L.TileLayer(cloudUrl, {tms:false,minZoom: 3, maxZoom: 19, attribution: osmAttrib});

	var xrayUrl = '/tiles/tiles.py/xray-cloud/{z}/{x}/{y}.png';
	var xray = new L.TileLayer(xrayUrl, {tms:false,minZoom: 3, maxZoom: 19, attribution: osmAttrib});
	
	map.setView(new L.LatLng(39.8, -30.6),3);
	map.addLayer(osm);
	map.addLayer(cloud);

var overlayMaps = {
    "Cloud Map": cloud,
    "Cloud XRay Map": xray
};
var basemaps = {
	"OSM": osm
}
L.control.layers(basemaps, overlayMaps,{collapsed:false}).addTo(map);
}


</script>

<body onload="initmap();">
<div id="map"></div>
</body>

</html>

